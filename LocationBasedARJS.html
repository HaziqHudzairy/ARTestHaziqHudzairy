<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
        <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
        <script src="https://cdn.rawgit.com/AR-js-org/AR.js/3.3.2/aframe/build/aframe-ar.js"></script>
        <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v6.1.1/dist/aframe-extras.loaders.min.js"></script>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="Styles.css">
    </head>

    <body style="margin: 0; overflow: hidden;">
        <a-scene
            renderer="logarithmicDepthBuffer: true;"
            embedded
            loading-screen="enabled: false;"
            arjs="sourceType: webcam; debugUIEnabled: false;"
        >
            <a-assets>
                <a-asset-item
                    id="animated-asset"
                    src="asset/LocationPin.glb"
                ></a-asset-item>
            </a-assets>

            <a-entity
                look-at="[gps-camera]"
                animation-mixer="loop: repeat"
                gltf-model="#animated-asset"
                scale="0.5513976828973354 0.5513976828973354 0.5513976828973354"
                gps-entity-place="latitude: 3.12672; longitude: 101.650183;"
            ></a-entity>

            <a-camera gps-camera rotation-reader></a-camera>

            <!-- UI for displaying latitude and longitude -->
            <a-entity id="locationText"
                position="-0.8 0.5 -1"
                text="value: Latitude: 0\nLongitude: 0; color: white; width: 3; wrapCount: 15;"
            ></a-entity>
        </a-scene>

        <script>
            // Get the text entity for updating
            var locationText = document.querySelector('#locationText');

            // Function to update the text with current latitude and longitude
            function updateLocationText(latitude, longitude) {
                locationText.setAttribute('text', 'value', 'Latitude: ' + latitude.toFixed(6) + '\nLongitude: ' + longitude.toFixed(6));
            }

            // Get current device's latitude and longitude
            navigator.geolocation.getCurrentPosition(function(position) {
                var latitude = position.coords.latitude;
                var longitude = position.coords.longitude;
                updateLocationText(latitude, longitude);
            });
        </script>
    </body>
</html>
